# Do NOT edit this file unless you really know what you are doing
SET(CMAKE_COLOR_MAKEFILE ON)
cmake_minimum_required(VERSION 3.16)
cmake_policy(SET CMP0076 NEW)

if(TARGET geophysics-netcdf::static)
	return()
endif()

# Set project name
project(geophysics-netcdf VERSION 1.0 DESCRIPTION "C++ interface for handling GA's Geophysical NetCDF data format" LANGUAGES CXX)
message(STATUS "Configuring geophysics-netcdf")

include(cmake/Message-Functions.cmake)

if(PROJECT_IS_TOP_LEVEL)
	include(cmake/Typical-Compiler-Options.cmake)
endif()

# Find PkgConfig
find_package(PkgConfig QUIET)

# Configure NetCDF C++ Libraries
include(cmake/Configure-NetCDF_CXX.cmake)

# Add the cpp-utils submodule with CGAL support turned OFF as CGAL is not needed
add_subdirectory(submodules/cpp-utils EXCLUDE_FROM_ALL)

set(sources ${sources} src/geophysics_netcdf.cpp)

# Add the static library
set(target geophysics-netcdf)
add_library(${target} STATIC)
set_target_properties(${target} PROPERTIES LINKER_LANGUAGE CXX)
set_target_properties(${target} PROPERTIES PUBLIC_HEADER include/geophysics_netcdf.hpp)
target_sources(${target} PUBLIC ${sources})
target_include_directories(${target} PUBLIC "$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>")
target_include_directories(${target} PUBLIC "$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/submodules/marray/include/andres>")
target_link_libraries(${target} PUBLIC cpp-utils::without-mpi)
target_link_libraries(${target} PUBLIC NETCDF::CXX)
#install(TARGETS ${target} OPTIONAL)

